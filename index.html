<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samen-Archiv emigei</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>ðŸŒ± Mein Samen-Archiv</h1>
        <div id="plant-grid" class="plant-grid">
            <p class="loading">Suche nach SamentÃ¼tchen...</p>
        </div>
    </div>

    <script>
        // Variablen definieren
        const username = 'emigei';
        const repo = 'pflanzen';

        // Emoji-Logik wieder hinzufÃ¼gen
        function getEmoji(name) {
            const n = name.toLowerCase();
            if (n.includes('tomate')) return 'ðŸ…';
            if (n.includes('chili') || n.includes('peperoni')) return 'ðŸŒ¶ï¸';
            if (n.includes('salat')) return 'ðŸ¥¬';
            if (n.includes('gurke')) return 'ðŸ¥’';
            if (n.includes('basilikum') || n.includes('krÃ¤uter')) return 'ðŸŒ¿';
            if (n.includes('blume')) return 'ðŸŒ¸';
            if (n.includes('karotte') || n.includes('mÃ¶hre')) return 'ðŸ¥•';
            return 'ðŸŒ±';
        }

        async function loadPlants() {
            try {
                const response = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/`);
                if (!response.ok) throw new Error('GitHub API Fehler');
                
                const files = await response.json();
                const grid = document.getElementById('plant-grid');
                grid.innerHTML = ''; 

                // Filtern und alphabetisch sortieren
                const plantFiles = files
                    .filter(file => file.name.endsWith('.html') && file.name !== 'index.html')
                    .sort((a, b) => a.name.localeCompare(b.name));

                plantFiles.forEach(file => {
                    const rawName = file.name.replace('.html', '').replace(/-/g, ' ');
                    const displayName = rawName.charAt(0).toUpperCase() + rawName.slice(1);
                    const emoji = getEmoji(file.name);
                    
                    const card = document.createElement('a');
                    card.href = file.name;
                    card.className = 'plant-card';
                    card.innerHTML = `
                        <span class="emoji">${emoji}</span>
                        <span><strong>${displayName}</strong></span>
                    `;
                    grid.appendChild(card);
                });

                if (plantFiles.length === 0) {
                    grid.innerHTML = '<p>Noch keine Anleitungen hochgeladen.</p>';
                }
            } catch (error) {
                console.error("Fehler beim Laden:", error);
                document.getElementById('plant-grid').innerHTML = '<p>Fehler beim Laden der Liste.</p>';
            }
        }

        // Funktion beim Laden der Seite ausfÃ¼hren
        loadPlants();
    </script>
</body>
</html>

